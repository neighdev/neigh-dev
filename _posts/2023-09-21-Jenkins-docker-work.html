---
date: '2023-09-21 20:42:56.265Z'
dateModified: '2023-09-21 20:43:43.179Z'
internalLink:
- cQIn5W4Z5Sed
- iuET4riugeLa
- GRylFbodx8U4
- JpSYH22oAi0f
noteId: UHqiH60dHwD3
tags:
- jekyllPost
template: GItJfUuuPW0R
title: 2023-09-21-Jenkins docker workspace headaches
---

<div class="ck-content">
<p>So today I wanted to add a builder image for <a class="reference-link" data-note-path="root/aEeHIF4T9O4M/en0BPWgHTPu4/cQIn5W4Z5Sed" href="{% link _projects/Neigh-Dev.html %}">Neigh Dev</a> to
          test the <a class="reference-link" data-note-path="root/aEeHIF4T9O4M/CUXqFJRGq3xE/iuET4riugeLa" href="{% link _wiki/Jekyll.html %}">Jekyll</a> build
          before actually committing to <a class="reference-link" data-note-path="root/aEeHIF4T9O4M/CUXqFJRGq3xE/JpSYH22oAi0f" href="{% link _wiki/Github.html %}">Github</a>.</p>
<p>This is the command I tried:</p><pre><code class="language-text-plain">docker run --rm --volume="./github:/srv/jekyll:Z" jekyll/builder:pages ls -all</code></pre>
<p>And it didn't work, it started however the volume was empty!</p>
<p>So it turns that, as I am running the <a class="reference-link" data-note-path="root/aEeHIF4T9O4M/CUXqFJRGq3xE/GRylFbodx8U4" href="{% link _wiki/Jenkins.html %}">Jenkins</a> agent
          in docker, any <i>docker --volume</i> command I give it points to the filesystem
          of the docker host. Not that of the agent I am running in.</p>
<p>Because the workspace path in the agent image was still available on the
          host I have just mounted the path one on one. This makes everything a lot
          easier. Be sure to change the permissions on the host so the Jenkins user
          has access rights. (chown 1000:1000 on the workspace did it for me).</p>
<p>Below mounts are for the <a class="reference-link" data-note-path="root/aEeHIF4T9O4M/CUXqFJRGq3xE/GRylFbodx8U4" href="{% link _wiki/Jenkins.html %}">Jenkins</a> Agent,
          not for the <a class="reference-link" data-note-path="root/aEeHIF4T9O4M/CUXqFJRGq3xE/iuET4riugeLa" href="{% link _wiki/Jekyll.html %}">Jekyll</a> image
          I was trying to run before.</p><pre><code class="language-text-x-yaml">    volumes: 
     - /var/run/docker.sock:/var/run/docker.sock
     - /home/jenkins/agent/workspace:/home/jenkins/agent/workspace</code></pre>
</div>